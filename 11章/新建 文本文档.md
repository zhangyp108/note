## 树型加法器

是一种用于加法计算的电路，通常用于数字信号处理中。其基本原理是将要相加的数字分为多个组，每组内的数字先相加得到一个结果，然后将所有组的结果再相加得到最终结果。

可以用一个简单的例子来说明树型加法器的工作原理。假设要计算三个二进制数的和：010，011，101。首先将这三个数分成两组，每组有两个数，如下所示：

Group 1: 01 + 01 = 10

Group 2: 10 + 11 = 101

可以看到，每组内的数字先相加得到一个结果，然后将所有组的结果再相加得到最终结果。这个过程可以用一棵树来表示，如下所示：

```
javascriptCopy code        
       111
       / \
      /   \
     /     \
    10    101
    /      /
   /      /
  01   011
```





## "Ling"加法器，也称为"CARRY-LOOKAHEAD"加法器，

是一种用于二进制加法的电路。与传统的"Ripple Carry"加法器相比，Ling加法器可以更快地进行加法运算，特别是在位数较多的情况下。

Ling加法器通过使用一种名为"预先计算进位(Carry Lookahead)"的技术来加速加法运算。该技术使用了一系列的逻辑门电路来在不必等待每一位的进位的情况下预测进位信号，从而可以同时计算出多个二进制数的加法结果。

简单来说，Ling加法器可以将加法运算分成两个步骤：预测进位和执行加法。预测进位的过程利用了数学原理，可以通过一系列逻辑门电路来实现，而执行加法的过程则可以使用传统的加法器电路来完成。这样就能够显著提高加法器的计算速度。

总之，Ling加法器是一种比传统加法器更快、更高效的二进制加法器。



![image-20230510180456803](C:\Users\kope\Desktop\11章\image-20230510180456803.png)

## 减法

![image-20230513103034481](C:\Users\kope\Desktop\11章\image-20230513103034481.png)

![image-20230513103058318](C:\Users\kope\AppData\Roaming\Typora\typora-user-images\image-20230513103058318.png)

![image-20230513103107036](C:\Users\kope\Desktop\11章\image-20230513103107036.png)



## 多输入加法器

多输入加法器是一种数字电路，可以接受多个二进制数字作为输入，并将它们相加得到一个二进制输出。常见的多输入加法器包括二位、四位、八位和十六位加法器等。在计算机中，多输入加法器被广泛应用于算术逻辑单元（ALU）和数据通路中，用于执行二进制数的加法运算。

多输入加法器的实现方式有很多种，最常见的是基于逻辑门的实现方式。以四位加法器为例，它通常由四个单独的一位全加器组成，每个全加器有三个输入和两个输出，可以将它们级联在一起实现四位二进制数的加法运算。同时，多输入加法器还需要一个额外的输入，用于接收进位信号，以实现多位二进制数的加法运算。

除了基于逻辑门的实现方式，还有其他的实现方式，例如基于半加器或全加器的级联实现方式、基于查找表（LUT）的实现方式等。这些实现方式各有优缺点，可以根据具体需求选择适合的实现方式。





![image-20230513103801599](C:\Users\kope\Desktop\11章\image-20230513103801599.png)

## 标志前置加法器

标志前置加法器采用了两级加法器结构，其中第一级加法器用于计算进位和不进位的两个结果，第二级加法器用于计算最终的和，并根据第一级加法器的进位结果来决定是否要对最终的和进行修正。

在第一级加法器中，每一位的计算分别采用全加器或半加器来完成，计算的结果分别为进位和不进位两个数值。同时，每一位还会产生一个进位标志和一个借位标志，用于标识当前位的计算是否需要进位或者借位。这些标志将被传递到第二级加法器中，用于最终结果的修正。

在第二级加法器中，每一位的计算同样采用全加器或半加器来完成，但是根据第一级加法器的进位标志来决定是否需要对当前位进行修正。如果当前位的进位标志为1，则需要将当前位的计算结果加1，以确保最终结果的正确性。

通过这种结构，标志前置加法器可以在保证计算精度的同时，大大提高加法器的计算速度，因此被广泛应用于数字电路中。

![image-20230513104940352](C:\Users\kope\Desktop\11章\image-20230513104940352.png)

## 模2^n-1加法

![image-20230513105318265](C:\Users\kope\Desktop\11章\image-20230513105318265.png)

在模2^n-1加法中，加法的结果是在模2^n-1的意义下计算得到的。具体来说，**如果两个n位二进制数相加的结果超过了2^n-1，那么就需要将其减去2^n-1，直到结果小于2^n-1为止。如果两个数相加的结果小于2^n-1，则直接输出该结果即可。**

模2^n-1加法可以通过一个简单的电路实现，该电路称为模2^n-1加器。模2^n-1加器通常采用串行级联的形式实现，每个级联单元负责一位的加法和进位，同时也负责将结果限制在模2^n-1的范围内。

由于模2^n-1加法具有简单、快速、可并行等特点，因此在很多场合下被广泛应用，比如在通信系统中实现CRC校验、在密码学中实现加密算法等。



## 绝对差计算

![image-20230513110133672](C:\Users\kope\Desktop\11章\image-20230513110133672.png)



## 1/0检测器



1/0检测器是一种电路，用于检测输入信号中是否存在除以零的情况，即判断输入信号中的分母是否为零。在数学中，除以零是没有意义的，因此1/0检测器常常用于防止电路出现非法的计算结果，避免对系统的损坏。

1/0检测器通常采用比较器、反相器、与门等基本逻辑电路实现。当输入信号中分母为零时，输出信号会被拉低或者升高，表示检测到了除以零的情况。1/0检测器常用于数字信号处理、通信系统、控制系统等领域。

1/0检测器的原理基于反相器的输出特性。反相器是一种电路元件，可以将输入信号进行反相处理，即输出信号与输入信号相反。当输入为高电平时，反相器输出低电平；当输入为低电平时，反相器输出高电平。

在1/0检测器电路中，将输入信号分别输入两个反相器，得到两个反相信号，即一个与输入信号相同，一个与输入信号相反。然后将这两个反相信号进行异或运算，得到的输出信号为1时，表示输入信号为高电平；输出信号为0时，表示输入信号为低电平。因此，1/0检测器可以实现对输入信号进行高低电平的检测。

![image-20230513111621969](C:\Users\kope\Desktop\11章\image-20230513111621969.png)

## 数值比较器

![image-20230513113358686](C:\Users\kope\Desktop\11章\image-20230513113358686.png)

## k=a+b比较器

![image-20230513113847284](C:\Users\kope\AppData\Roaming\Typora\typora-user-images\image-20230513113847284.png)

![image-20230513113911692](C:\Users\kope\AppData\Roaming\Typora\typora-user-images\image-20230513113911692.png)

# 11.5 计数器

   两种常用的计数器是二进制计数器( binary counter)和线性反馈移位寄存器(linear-feedbackshift register)。一个N位的二进制计数器按二进制顺序经过2"个输出值。简单设计的二进制计数器的最小周期时间随 N的增加而增加，而快速设计的二进制计数器在固定时间内完成操作。一个N位线性反馈移位寄存器按伪随机顺序经过多至2"-1个输出值。它具有很短的最小周期时间且与 N 无关，所以它除了能生成伪随机数外，还可用来作为极高速的计数器。

![image-20230513114935813](C:\Users\kope\Desktop\11章\image-20230513114935813.png)



## 11.5.1二进制计数器

最简单的二进制计数器是异步串行进位计数器。它由N个连接成套扣形式的寄存器构成，每个寄存器的下降跳变触发下一个寄存器，因此它的延时可以非常长。它也没有复位信号，这使测试它很困难。一般来说异步电路会引入一大堆各种各样的问题，所以这里介绍串行进位计数器主要是出于对历史的兴趣，而不是推荐将它用于商用设计

![image-20230513120028502](C:\Users\kope\Desktop\11章\image-20230513120028502.png)

![image-20230513120113705](C:\Users\kope\AppData\Roaming\Typora\typora-user-images\image-20230513120113705.png)

![image-20230513120121562](C:\Users\kope\AppData\Roaming\Typora\typora-user-images\image-20230513120121562.png)gao'sugaosu

## 高速二进制计数器

其原理基于时钟信号和级联触发器。每个触发器都有两个状态，通常用0和1表示。时钟信号作为计数器的输入，将计数器的值按照二进制序列递增或递减。计数器的输出被分为不同的比特位，每个比特位都对应一个触发器。当计数器的值增加到达最大计数时，它将回滚到最小计数，并再次开始计数，形成一个循环。高速二进制计数器通常用于计时器、频率合成器、数字信号发生器等应用中。



## 环形计数器和Johnson计数器

环形计数器(ring counter)由M位位存器构成它的输出反它的输人如图1153(a)所示。复位时,第一位初始化为1而其余各位都初始化为0。TC 信号每 M个周期翻转一次。环形计数器是构成极高速预定标计数器(prescalar)的简便方法，因为在触发器之间没有任何逻辑，但当M 较大时它们的成本也较高

Johnson 或 Mobius 计数器类似于环形计数器，但它的输出经反相后再反馈回它的输人，如图11.53(b)所示。这些触发器复位时全部为0 值并计数经过 2M 个状态后再重复进行下去表11.6为一个3位Johnson 计数器的序列

![image-20230513121205304](C:\Users\kope\Desktop\11章\image-20230513121205304.png)

## 线性反馈移位寄存器

![image-20230513122137199](C:\Users\kope\Desktop\11章\image-20230513122137199.png)

这一LFSR是最大长度(maximal-length)移位寄存器的例子因为它的输出序列经过所有2”-1个组合(所有位为0的情况除外)。馈送至XOR 的输称为抽头序列(tap sequence)并且常用一个特性多项式(characteristic polynomial)表示。例如这一3位LFSR的特征多项式为1+x'x因
为抽头来自第二个和第三个寄存器的输出。它的输出Y按照7位序列[1110010]重复。这是一个伪随机位序列(Pseudo-Random Bit Sequence，PRBS)的例子。LFSF 可用做高速计数器和伪随机数发生器。伪随机序列可以很方便地用于通信链路中的内建自测试和误码率测试。它们也可以用在许多扩频通信系统如 GPS 和 CDMA 中，在这些系统中它们的相关特性使其他用户看起来就好像是不相关的噪声。表11.8 列出了一些常用的最大长度 LFSR 的特征多项式。对于某些长度 N,可能需要两个以上的抽头。对于许多N值，存在有多个多项式，因而可以得到多个不同最大长度的 LFSR。注意LFSR 的周期时间由寄存器和少数几个异或门的延时决定。[Golomb81]提供了对线性反馈移位寄存器的定型处理方法。

![image-20230513122214699](C:\Users\kope\Desktop\11章\image-20230513122214699.png)

## 11.6布尔逻辑运算

![image-20230515165103807](C:\Users\kope\Desktop\11章\image-20230515165103807.png)

## 11.7编码

### 11.7奇偶校检

![image-20230515175238431](C:\Users\kope\Desktop\11章\image-20230515175238431.png)

奇偶校验位可以增加到一个 N位的字中用来指明在该中1的数是数个还是数个主偶数校验(even parity)中，这一额外增加的位是所有其他N位的异或它保证了(N+1)位的编码字中有偶数个1：

![image-20230515175253013](C:\Users\kope\Desktop\11章\image-20230515175253013.png)

### 格雷码

与二进制码的换算：

![image-20230515181328226](C:\Users\kope\Desktop\11章\image-20230515181328226.png)

![image-20230515181342067](C:\Users\kope\Desktop\11章\image-20230515181342067.png)

### 异或/异或非电路形式

![image-20230515182606940](C:\Users\kope\Desktop\11章\image-20230515182606940.png)

![image-20230515182616860](C:\Users\kope\Desktop\11章\image-20230515182616860.png)

![image-20230515182754310](C:\Users\kope\Desktop\11章\image-20230515182754310.png)

![image-20230515182914243](C:\Users\kope\AppData\Roaming\Typora\typora-user-images\image-20230515182914243.png)

## 11.8移位器

移位操作可以有两种方式:**移固定位数**或**移可变位数**。执行固定位数移位的硬件非常简单只需要依靠连线就能完成。它们也是执行乘或除 2 的指数时的一种有效方法。

可变位数的移位器需要一个N位的输入A、一个移位位数k以及表明移位类型和方向的控制信号，他将生成一个N位的输出Y。有三种常用的可变位数移位类型，每一种都可以执行左移或右移。

  循环移位(rotate):以环行方式循环数据，其中一端**空出的位置由另一端移出的数字填补。**

o 例:1011 ROR 1(循环右移一位)= 1101;1011 ROL(循环左移1位)= 0111

逻辑移位(logical shift):左移或移数字，其中**空出的位置由零填补**。

o例:1011 LSR 1(逻辑右移1位)= 0101;1011 LSL 1(逻辑左移1位)= 0110

算术移位(arithmetic shift)：与逻辑移位器相同但算术右移时用**符号位填充各个最高有效位(**当采用算术右移 位将一个数除以2时，为了保证正确的符号需要将2 的补码数进行扩)。

o 例:1011 ASR 1(算术右移1位)= 1101;1011 ASL1(算术左移1位)= 0110

### 斗式移位器

斗式移位器（barrel shifter）是一种电子电路，用于在计算机系统中执行位移操作。它可以将二进制数据在并行线路上向左或向右移动指定数量的位数。斗式移位器常用于处理器的指令执行阶段，用于实现位移、循环移位、逻辑运算等操作。

斗式移位器的原理如下：

1. 数据输入：斗式移位器有一个数据输入端，接收待操作的二进制数据。
2. 移位控制输入：斗式移位器还有一个移位控制输入端，用于接收指定的移位操作。这个输入可以是一个二进制数，每一位对应一个位移操作，或者是一个控制信号，用于选择预定义的位移模式（例如，循环移位、逻辑左移、逻辑右移等）。
3. 移位操作：根据移位控制输入，斗式移位器内部的电路根据指定的位移模式对输入数据进行相应的位移操作。
4. 数据输出：经过位移操作后，斗式移位器将结果输出到一个或多个输出线路上，供后续电路使用。

斗式移位器的内部结构包括多个级联的移位单元，每个移位单元负责一个位的移位操作。通过控制每个移位单元的输入和输出连接，可以实现不同的移位模式。

例如，对于一个4位的斗式移位器，控制输入为2位，可以选择4种不同的位移模式（00、01、10、11）。对于逻辑左移操作（控制输入为10），每个移位单元将其输入连接到前一个移位单元的输出，最后一个移位单元的输出接收输入的最高位。对于逻辑右移操作（控制输入为01），每个移位单元将其输入连接到后一个移位单元的输出，第一个移位单元的输出接收输入的最低位。其他位移模式的实现原理类似，只是连接方式不同。

斗式移位器的优势在于它可以在一个时钟周期内完成大范围的位移操作，相比较串行移位器可以大大提高位移操作的速度。它广泛应用于处理器、数字信号处理器（DSP）、加密算法等领域。

![image-20230515211035990](C:\Users\kope\Desktop\11章\image-20230515211035990.png)

### 桶式移位器

当我们在数字电路中需要对二进制数据进行位移操作时，可以使用桶式移位器（barrel shifter）来实现。桶式移位器可以在一个时钟周期内实现大范围的位移操作，相比串行移位器能够提高位移操作的速度。

桶式移位器的基本原理是通过级联的移位单元实现位移操作。每个移位单元负责一个位的移位操作，而整个桶式移位器由多个移位单元组成。

![image-20230515213238924](C:\Users\kope\Desktop\11章\image-20230515213238924.png)

桶式移位器的输入是待移位的二进制数据和一个移位控制信号。移位控制信号决定了位移的方向和位移的位数。

例如，如果我们想将一个4位数据向左移动2位，那么移位控制信号将设置为"10"。在这种情况下，Bit 3将移动到Bit 1，Bit 2将移动到Bit 0，而Bit 0和Bit 1将保持不变。

具体的位移操作通过连接每个移位单元的输入和输出来实现。每个移位单元将其输入连接到前一个移位单元的输出。对于向左移位，最右边的移位单元接收输入数据的最高位，并将其输出连接到左边的移位单元。对于向右移位，最左边的移位单元接收输入数据的最低位，并将其输出连接到右边的移位单元。

经过位移操作后，最终输出的结果就是移位后的数据。

桶式移位器可以支持多种位移操作，包括逻辑左移、逻辑右移、算术左移、算术右移等。具体的位移模式取决于移位控制信号的设置。不同的位移模式可能需要不同的移位单元连接方式，以实现所需的位移操作。

- why call 桶？

桶式移位器之所以被称为"桶式"，是因为**其内部的移位单元排列方式类似于一排连续的桶子。每个移位单元就像一个桶，负责接收并传递数据的位。**

类似于将水从一个桶倒入另一个桶，桶式移位器中的数据在移位操作过程中从一个移位单元"桶"流向另一个移位单元"桶"，最终到达目标位置。这种流动的方式使得数据的位移操作具有并行性，可以在一个时钟周期内完成大范围的位移。

此外，桶式移位器还可以实现循环移位操作。循环移位是一种特殊的位移操作，其中超出数据长度的位会被重新循环到数据的另一端。例如，一个4位的循环左移2位操作将使数据的最高2位移动到最低2位，而最低2位则会循环到最高2位。这种类似于数据在桶中不断循环的行为也是桶式移位器名称的一个原因。

因此，桶式移位器的名称主要是为了形象地描述其内部的位移单元排列方式，以及实现位移和循环移位操作的能力。

![image-20230515213718943](C:\Users\kope\Desktop\11章\image-20230515213718943.png)

## 11.9乘法器

![image-20230515214125978](C:\Users\kope\Desktop\11章\image-20230515214125978.png)